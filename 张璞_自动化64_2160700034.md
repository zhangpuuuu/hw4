#数字图像处理第四次作业
> 班级：自动化64 
> 
> 姓名：张璞  
> 
> 学号：2160700034




##一、空域低通滤波器



“滤波”一词来自于频域处理，指的是接收或拒绝一定的频率分量。通过低频的滤波器叫做低通滤波器，其最终效果是模糊或平滑一副图像。由于频域相乘对应与时域相卷，于是空域滤波器与图像相卷积也能达到相同的效果。

空间滤波器由
(1)一个邻域（一个较小的矩形）（2）对该邻域包围的像素执行的预定义操作组成。滤波产生新的像素值，新像素的坐标等于邻域中心的坐标，像素的值是滤波的结果。一般来说，使用大小为m**n的滤波器对大小为M*N的图像进行线性空间滤波，如下式所示，


> g(x,y)=∑_(s=-a)^a▒∑_(t=-b)^b▒〖w(s,t)f(x+s,y+t)



其中，m=2a+1，n=2b+1，a、b为整数。
###1.高斯滤波器简介
高斯低通滤波器是一种常用的空域平滑滤波技术，它是一类根据高斯函数的形状来选择权值的线性平滑滤波器。二维高斯函数表达式为，


> h(x,y)=〖1/(2πσ^2 ) e〗^(-(x^2+y^2)/(2σ^2 )) 



 其中，σ是标准差，(x,y)是模板中的像素值（整数）。高斯滤波器宽度（决定着平滑程度）是由参数σ表征的，σ越大，高斯滤波器的频带就越宽，平滑程度就越好。因此，通过调节平滑程度参数σ，可在图像特征过分模糊（过平滑）与平滑图像中由于噪声和细纹理所引起的过多的不希望突变量（欠平滑）之间取得折衷。二维高斯函数卷积可以分两步来进行，首先将图像与一维高斯函数进行卷积，然后将卷积结果与方向垂直的相同一维高斯函数卷积． 
###2.实验结果
与滤波器模板尺寸有关的图像平滑效果如下图所示，
test1.pgm高斯滤波：

![test1原始图像](media/78d1d04e8119e2fd3f94d380ceba0d47.png)

![test1高斯滤波（3x3）](media/62456c8d3ee80a330f12625c2e30d2f0.png)

![test1高斯滤波（5x5）](media/b7572f33ca8560726b99599552ffcaee.png)

![test1高斯滤波（7x7）](media/27f3c2755b9f4176f1456a0b1e2d306f.png)

![](media/aa07bb66e179cf57aa4bb0eadf0f7f93.emf)

![](media/a6d865c6ad3725aa7dfd3b3773c7c84c.emf)

![](media/1bab7028d78bc37385ce7c5cb5f38cdb.emf)

test2.tif高斯滤波：

![](media/6dfdb246b28b7ada0f034b6708dff542.emf)

![](media/5d97d5f1ac2102f600934a5a061ebb46.emf)

![](media/b3a00bf747d9710928cc70180f7042e0.emf)

![](media/5c3d629898397aad61608b625916044e.emf)

![](media/57389884d0cbb83272691d3cc0774d30.emf)

![](media/eab5bdc1396be74aadfc91e43b75f0f7.emf)

![](media/91aa4b80458dc797c2e81aceaedd545e.emf)
###3.结果分析
观察以上两组处理过后的图片可以看出，空域的低通滤波器能对图像起到明显的平滑作用，且模板尺寸越大其模糊效果越明显。由观察可得，高斯低通滤波器对图1的去噪效果并不理想，即使不断增大滤波器模板尺寸（边长分别为3~7），仍不能有效地消除噪声，模板边长为7时，原图像已经发生了严重的模糊失真，很多细节已经难以分辨。这表明，当噪声的灰度与其相邻像素的灰度接近时，会导致目标的混合效应。

观察图2的原始图像可以发现，高斯滤波器对其滤波去噪效果较为明显，这是因为人物面部噪声的灰度值与原始图像灰度值很接近，和高斯分布的噪声很接近。这是应用高斯低通滤波器滤波，这些较小的噪声就与灰度背景融为一体，当模板边长为5时既保留了原始图像的绝大部分细节，同时图像噪声也得到较好的去除。可见，空域的高斯低通滤波器并不适合处理带有脉冲噪声的图像，而对一些像高斯噪声这样的随机分布噪声有很好的效果。
###4.中值滤波器简介
中值滤波器是一种统计排序的非线性滤波器，其响应以滤波器包围的图像区域的像素的排序为基础，然后以灰度的中值代替该像素的值。中值滤波器的使用非常广泛，因为它对于一定类型的随机噪声有非常优秀的去噪声能力，而且比相同尺寸的线性平滑滤波器的模糊程度明显要低。对于一个3乘3的邻域，其中值是第五个最大的值，而在一个5乘5的邻域中，中值就是第13 个最大的值。
###5.实验结果
![](media/6d720d21f7fdb2a6cf6800bd8ddf7d40.png)

![](media/16e4783a3dd8cd1b2e415854e5f23909.png)

![](media/5cec226fa3f2a0bf0629dc1b4caf5f93.png)

![](media/a6b4fd2c4bdbea561032363a4bda827a.png)

![](media/dcd37d897e8c81318d5047ec3b3011a6.png)

![](media/4eca1739fb8439154be7b164972c1a9f.png)

![](media/d08dfa65861def9adfbdf36020d54700.png)

![](media/8c9792d36956df51cf2ad0fd50191020.png)

![](media/1d9bf60f4117b286a7fc7df08323edcc.png)

![](media/f397072a99d3b263e0dbfa0a299a0849.png)

![](media/2eb7c6f06345b28a0b6e13dc06710473.png)

![](media/665c5b3804b188fe11870108c98aaf25.png)
###6.结果分析
中值滤波器的主要功能是使拥有不同灰度的点更接近于它的相邻点。事实上，使用m*m中值滤波器来去除那些相对于其邻域像素更亮或更暗并且其区域小于m^2/2（滤波器区域的一半）的孤立像素族。在这种情况下，“去除”的意思是强制为邻域的中值灰度。较大的族所受到的影响明显较小。同之前所讨论的空域低通滤波器对图像处理的平滑效果一样，中值滤波器模板尺寸越大其对图像的模糊效果越明显。


##二、图像的非锐化掩蔽
	

###1. 简介
图像的锐化处主要目的是突出图像的灰度过渡部分。图像的非锐化掩蔽处理过程主要是从原图像中减去一副非锐化的图像，其处理步骤为，
	

1.模糊原图像，令¯f(x,y)表示模糊图像

2.从原图像中减去模糊图像，

> g_mask (x,y)=f(x,y)-¯f(x,y)

3.将模板加到原图像上	

> g(x,y)=f(x,y) 〖+k*g〗_mask (x,y)


通常，k表示权重系数（k≥0），当k=1时，我们得到非锐化掩蔽，当k>1时，该处理为高提升滤波。
###2.处理结果
![unsharp_masking_test4_copy](media/d60e80986b86e0899c6674003451cb48.png)

![](media/06c7bef31d2b8f90c4472df34de35333.emf)
###3.结果分析
从以上两组图片可以发现，图像的非锐化掩蔽能有效地突出图像中像素值突变的部分，包括景物的边缘和脉冲噪声点。该算法的锐化原理从上图中可以很清晰的反映出来，就是在图像灰度值突变处为原图像添加相应的锐化分量，最注重提高这些区域的灰度值以达到锐化的效果。
##三、Sobel算子边缘检测
###1.简介
图像处理中一阶微分是用梯度的幅值来实现的。对于函数f(x,y)，f在坐标(x,y)处的梯度定义为二维列向量，

> ∇f=grad(f)=[■(g_x@g_y )]=[■(∂f/∂x@∂f/∂y)]

该向量具有重要的几何特性，即它指出了在位置(x,y)处f的最大变化率方向。以3*3模板为例，对上式中两个方向的梯度进行一次近似处理，以第三行和第一行的差近似𝑥方向的差分，以第三列和第一列的差近似𝑦方向的差分，得到如下的近似表达式，

> g_x=∂f/∂x=（z_7+2z_8+z_9 ）-（z_1+2z_2+z_3 ）

> g_y=∂f/∂y=（z_3+2z_6+z_9 ）-（z_1+2z_4+z_7 ）

其中，z_i表示原图像中模板覆盖区域某一像素的灰度。

利用sobel算子进行边缘检测的方法就是分别利用x方向和y方向的sobel对原始图像进行两个方向上的边缘检测，然后将两个方向上的检测结果加权求和，权值均为0.5，这个方法相比平方和开根的处理方式效果近似且运算量大大减小。
###2.处理结果
自己编写的程序处理结果：
![Sobel_edge_detector_test4_copy](media/ee3a0f5ccab04e3f5d440463b74472be.png)
![](media/37603b87de6a255857fb46dc499629b3.emf)
调用edge函数的处理结果：
![](media/c731c8ad1f674c5e8905f1673e29cbd1.emf)
![](media/a1a70c82d7b5f6f80594c692dcb3cebe.emf)
###3.结果分析
Sobel算子是图像处理中的算子之一，主要用作边缘检测。在在图像的任何一点使用此算子，将会产生对应的梯度矢量或是其法矢量。由于Sobel算子是滤波算子的形式，用于提取边缘，可以利用快速卷积函数，简单有效，因此应用广泛。美中不足的是，Sobel算子并没有将图像的主体与背景严格地区分开来，换言之就是Sobel算子没有基于图像灰度进行处理，由于Sobel算子没有严格地模拟人的视觉生理特征，所以提取的图像轮廓有时并不能令人满意。从图像观察，可以看出索贝尔算子并没有将图像边缘完全分离出来。
##四、Laplace算子边缘检测
###1.简介
拉普拉斯算子是最简单的各向同性微分算子，具有旋转不变性。一个二维图像函数f(x,y)的拉普拉斯变换是各向同性的二阶导数，定义为，
                        
> ∇^2 f(x,y)=(∂^2 f)/(∂x^2 )+(∂^2 f)/(∂y^2 )  
              
为了更适合于数字图像处理，将该方程表示为离散形式如下，

> ∇^2 f(x,y)=[f(x+1,y)+f(x,y+1)+f(x-1,y)+f(x,y-1)]-4f(x,y)

当拉普拉斯算子输出出现过零点时就表明有边缘存在，其中忽略无意义的过零点（均匀零区）。原则上，过零点的位置精确可以通过线性内插方法精确到子像素，不过由于噪声，结果可能并不精确。

计算一阶导数的边缘检测器，如果所求的一阶导数高于某一阈值，则确定该点为边缘点。这样做会导致检测的边缘点太多。拉普拉斯算子是一种更好的方法，通过求梯度局部最大值对应的点，并认定它们是边缘点，一阶导数的局部最大值对应着二阶导数的零交叉点，这意味着在边缘点处一阶导数的峰值，同样地，有二阶导数的零交叉点，这样通过寻找图像强度的二阶导数的零交叉点就能找到边缘点。
###2.处理结果
![](media/5cc4c5e0f05682015bdda71739601e2e.emf)

![Laplace_edge_detection_test3_corrupt](media/f5440a00a74e32d612bcc2d5d45c3b23.png)
###3.结果分析
拉普拉斯算子作为线性二次微分算子，在边缘处会产生一个陡峭的零交叉，对噪声点会很敏感，而且容易出现双边缘。因此由处理结果看来，拉普拉斯算子对于test3 corrupt.pgm的边沿检测较为理想，而对于test4 copy.bmp的边缘检测不是很理想，但是经过滤波后在检测可以得到一定的改善。
##五、Canny算子边缘检测
###1.简介
图像边缘检测必须满足两个条件，即有效抑制噪声和边缘精确定位。边缘检测算法通过平滑滤波去除图像噪声的同时，也增加了边缘定位的不确定性；反之，提高边缘检测算子对边缘敏感性的同时，也提高了对噪声的敏感性。Canny算子力图在抗噪声干扰和精确定位边缘之间寻求最佳折中方案，根据信噪比与定位乘积进行测度，得到最优化逼近算子属于先平滑后求导数的方法。
用Canny算子检测图像边缘的步骤如下：
	
1. 用高斯滤波器平滑图象；
1. 用一阶偏导的有限差分来计算滤波后图像梯度的幅值和方向；
1. 对梯度幅值进行非极大值抑制，其过程为找出图像梯度中的局部极大值点，把其他非局部极大值点置零以得到细化的边缘。
1. 用双阈值算法检测和连接边缘。使用两个阈值T1和T2（T1>T2），T1用来找到每条线段，T2用来在这些线段的两个方向上延伸寻找边缘的断裂处，并连接这些边缘。
###2.处理结果
![](media/e9038b7226f00e7242ef3d702c09bd9d.emf)

![](media/a805da3b6b34e83f3e8fe0a555b1adf3.emf)
###3.结果分析
由于自己编写的Canny算子处理效果不理想，故使用MATLAB中提供的函数。从得到的结果看出Canny算子可以很好的将图像的边缘提取出来。


**参考文献**

[1] 冈萨雷斯.数字图像处理（第三版）北京：电子工业出版社，2011
[2] 周品.MATLAB数字图像处理 北京：清华大学出版社，2012
[3] 杨杰.数字图像处理及MATLAB实现 北京：电子工业出版社，2010








